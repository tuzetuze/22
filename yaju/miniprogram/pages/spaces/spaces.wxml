<view class="container">
  <!-- 简化头部 -->
  <view class="header-section">
    <text class="page-title">选择要装修的房间</text>
    <text class="page-subtitle">点击房间开始规划</text>
  </view>

  <!-- 空间网格 -->
  <view class="spaces-grid">
    <view 
      class="space-card" 
      wx:for="{{spaceList}}" 
      wx:key="id"
      bindtap="navigateToSpacePlan"
      data-space="{{item}}"
    >
      <!-- 房间图标 -->
      <view class="space-icon-area">
        <text class="space-icon">{{item.icon}}</text>
        <!-- 完成标记 -->
        <view class="complete-mark" wx:if="{{isSpaceCompleted(item.id)}}">✓</view>
      </view>
      
      <!-- 房间信息 -->
      <view class="space-details">
        <text class="space-name">{{item.name}}</text>
        <text class="space-status">{{getSpaceStatusText(item.id)}}</text>
        
        <!-- 预算显示 -->
        <view class="space-budget" wx:if="{{getSpaceBudget(item.id) > 0}}">
          <text class="budget-amount">￥{{getSpaceBudget(item.id)}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 底部提示 -->
  <view class="bottom-tip" wx:if="{{completedCount > 0}}">
    <text class="tip-text">已完成 {{completedCount}} 个房间，继续加油！</text>
  </view>
</view>

<!-- 设置预算弹窗 -->
<view class="modal-overlay" wx:if="{{showBudgetModal}}" bindtap="closeBudgetModal">
  <view class="modal" catchtap="">
    <view class="modal-header">
      <text class="title-medium">设置装修预算</text>
    </view>
    <view class="modal-body">
      <view class="input-group">
        <text class="input-label">总预算 (元)</text>
        <input 
          class="input-field" 
          type="number" 
          placeholder="请输入预算金额"
          value="{{tempBudget}}"
          bindinput="onBudgetInput"
        />
      </view>
    </view>
    <view class="modal-footer">
      <button class="btn btn-secondary" bindtap="closeBudgetModal">取消</button>
      <button class="btn btn-primary" bindtap="confirmBudget">确定</button>
    </view>
  </view>
</view>

<!-- 设置风格弹窗 -->
<view class="modal-overlay" wx:if="{{showStyleModal}}" bindtap="closeStyleModal">
  <view class="modal" catchtap="">
    <view class="modal-header">
      <text class="title-medium">选择整体风格</text>
    </view>
    <view class="modal-body">
      <view class="style-options">
        <view 
          class="style-option {{tempStyle === item.id ? 'selected' : ''}}"
          wx:for="{{styleOptions}}"
          wx:key="id"
          bindtap="selectStyle"
          data-style="{{item.id}}"
        >
          <view class="style-color" style="background-color: {{item.color}};"></view>
          <text class="style-name">{{item.name}}</text>
        </view>
      </view>
    </view>
    <view class="modal-footer">
      <button class="btn btn-secondary" bindtap="closeStyleModal">取消</button>
      <button class="btn btn-primary" bindtap="confirmStyle">确定</button>
    </view>
  </view>
</view>